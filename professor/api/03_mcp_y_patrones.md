# MCP y Patrones de APIs

## Model Context Protocol (MCP)

### Â¿QuÃ© es MCP?

**MCP** (Model Context Protocol) es un protocolo abierto desarrollado por Anthropic que estandariza cÃ³mo las aplicaciones de IA (como modelos de lenguaje) se conectan con **fuentes de datos y herramientas externas**.

### El Problema que Resuelve

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SIN MCP (antes)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚             â”‚                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”€â”€â”€â”€â”€â”‚   Modelo    â”‚â”€â”€â”€â”€â”€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ GitHub  â”‚      â”‚    de IA    â”‚      â”‚ Slack   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”‚  (Claude,   â”‚â”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                    â”‚   GPT...)   â”‚                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”€â”€â”€â”€â”€â”‚             â”‚â”€â”€â”€â”€â”€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚  Drive  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ DB SQL  â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                 â”‚
â”‚   âŒ Cada integraciÃ³n es CUSTOM                                 â”‚
â”‚   âŒ N fuentes = N integraciones diferentes                     â”‚
â”‚   âŒ No hay estÃ¡ndar                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CON MCP (ahora)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ GitHub  â”‚â”€â”€â”                                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                â”‚
â”‚                â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”œâ”€â”€â”€â”‚  Protocolo    â”‚â”€â”€â”€â”€â”‚   Modelo    â”‚         â”‚
â”‚   â”‚  Drive  â”‚â”€â”€â”¤   â”‚     MCP       â”‚    â”‚    de IA    â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  (estÃ¡ndar)   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                â”‚
â”‚   â”‚  Slack  â”‚â”€â”€â”˜                                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                 â”‚
â”‚   âœ… UN protocolo para TODO                                     â”‚
â”‚   âœ… Plug & Play                                                â”‚
â”‚   âœ… EstÃ¡ndar abierto                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AnalogÃ­a: USB para IA

Piensa en MCP como el **puerto USB de la inteligencia artificial**:

```
Antes de USB:                    DespuÃ©s de USB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Puerto especial    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teclado â”‚                      â”‚ Teclado â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Otro puerto        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”œâ”€â”€â”€â”€â”‚   USB    â”‚
â”‚  Mouse  â”‚                      â”‚  Mouse  â”‚â”€â”€â”¤    â”‚ (estÃ¡ndarâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  Ãºnico)  â”‚
                                              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Otro mÃ¡s           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ CÃ¡mara  â”‚                      â”‚ CÃ¡mara  â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MCP = USB para conectar IA con herramientas
```

### Arquitectura MCP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARQUITECTURA MCP                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    HOST      â”‚      â”‚   CLIENTE    â”‚      â”‚   SERVIDOR   â”‚   â”‚
â”‚  â”‚  (Claude,    â”‚â—„â”€â”€â”€â”€â–ºâ”‚     MCP      â”‚â—„â”€â”€â”€â”€â–ºâ”‚     MCP      â”‚   â”‚
â”‚  â”‚   tu app)    â”‚      â”‚              â”‚      â”‚              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚           â”‚
â”‚   La aplicaciÃ³n         Intermediario              Provee       â”‚
â”‚   que usa IA            del protocolo              recursos     â”‚
â”‚                                                     â”‚           â”‚
â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                              â”‚ Herramienta â”‚    â”‚
â”‚                                              â”‚ o Datos     â”‚    â”‚
â”‚                                              â”‚ (GitHub,    â”‚    â”‚
â”‚                                              â”‚  Files,     â”‚    â”‚
â”‚                                              â”‚  DB...)     â”‚    â”‚
â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Componentes de MCP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              QUÃ‰ PUEDE EXPONER UN SERVIDOR MCP                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. RESOURCES (Recursos)                                        â”‚
â”‚     Datos que el modelo puede leer                              â”‚
â”‚     Ejemplo: archivos, documentos, datos de BD                  â”‚
â”‚                                                                 â”‚
â”‚  2. TOOLS (Herramientas)                                        â”‚
â”‚     Acciones que el modelo puede ejecutar                       â”‚
â”‚     Ejemplo: crear archivo, enviar email, buscar en web         â”‚
â”‚                                                                 â”‚
â”‚  3. PROMPTS (Prompts/Plantillas)                                â”‚
â”‚     Instrucciones predefinidas para el modelo                   â”‚
â”‚     Ejemplo: "Analiza este cÃ³digo con estas reglas"             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ejemplo de Flujo MCP

```
Usuario: "Crea un archivo llamado notas.txt con mis pendientes"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FLUJO                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. Usuario â”€â”€mensajeâ”€â”€â–º Host (Claude Desktop)                  â”‚
â”‚                                                                 â”‚
â”‚  2. Host consulta: "Â¿QuÃ© herramientas tengo disponibles?"       â”‚
â”‚     Cliente MCP â”€â”€â”€â”€â”€â”€â–º Servidor MCP (filesystem)               â”‚
â”‚                                                                 â”‚
â”‚  3. Servidor responde: "Tengo: crear_archivo, leer_archivo..."  â”‚
â”‚                                                                 â”‚
â”‚  4. Host decide usar "crear_archivo" con parÃ¡metros:            â”‚
â”‚     {                                                           â”‚
â”‚       "nombre": "notas.txt",                                    â”‚
â”‚       "contenido": "Mis pendientes..."                          â”‚
â”‚     }                                                           â”‚
â”‚                                                                 â”‚
â”‚  5. Servidor ejecuta la acciÃ³n y responde                       â”‚
â”‚                                                                 â”‚
â”‚  6. Host informa al usuario: "Archivo creado exitosamente"      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mensaje MCP (PseudocÃ³digo)

```yaml
# PeticiÃ³n para listar herramientas disponibles
method: tools/list

# Respuesta del servidor
result:
  tools:
    - name: crear_archivo
      description: "Crea un nuevo archivo en el sistema"
      inputSchema:
        type: object
        properties:
          ruta:
            type: string
            description: "Ruta del archivo"
          contenido:
            type: string
            description: "Contenido del archivo"
        required:
          - ruta
          - contenido
    
    - name: buscar_en_web
      description: "Busca informaciÃ³n en internet"
      inputSchema:
        type: object
        properties:
          query:
            type: string
```

### ComparaciÃ³n con APIs Tradicionales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            MCP vs APIs TRADICIONALES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  API REST tÃ­pica:                                               â”‚
â”‚  â”œâ”€â”€ DiseÃ±ada para humanos/apps                                 â”‚
â”‚  â”œâ”€â”€ DocumentaciÃ³n para desarrolladores                         â”‚
â”‚  â””â”€â”€ El programador decide quÃ© endpoints llamar                 â”‚
â”‚                                                                 â”‚
â”‚  MCP:                                                           â”‚
â”‚  â”œâ”€â”€ DiseÃ±ada para que IAs la entiendan                         â”‚
â”‚  â”œâ”€â”€ Autodescriptiva (el modelo "lee" las capacidades)          â”‚
â”‚  â””â”€â”€ El modelo decide quÃ© herramientas usar                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Patrones de DiseÃ±o de APIs

### 1. PatrÃ³n de PaginaciÃ³n

Cuando tienes muchos resultados, no los devuelves todos de una vez.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAGINACIÃ“N                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Sin paginaciÃ³n (âŒ malo):                                      â”‚
â”‚  GET /usuarios â†’ Devuelve 1 millÃ³n de usuarios                  â”‚
â”‚                                                                 â”‚
â”‚  Con paginaciÃ³n (âœ… bueno):                                     â”‚
â”‚  GET /usuarios?pagina=1&limite=20 â†’ Devuelve 20 usuarios        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tipos de paginaciÃ³n:**

```
OFFSET-BASED (por nÃºmero de pÃ¡gina):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /productos?offset=20&limit=10       â”‚
â”‚                                         â”‚
â”‚ "Dame 10 productos, empezando del 21"   â”‚
â”‚                                         â”‚
â”‚ Respuesta:                              â”‚
â”‚ {                                       â”‚
â”‚   "datos": [...],                       â”‚
â”‚   "total": 150,                         â”‚
â”‚   "offset": 20,                         â”‚
â”‚   "limit": 10                           â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CURSOR-BASED (por cursor/token):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /productos?cursor=abc123&limit=10   â”‚
â”‚                                         â”‚
â”‚ "Dame 10 productos despuÃ©s de abc123"   â”‚
â”‚                                         â”‚
â”‚ Respuesta:                              â”‚
â”‚ {                                       â”‚
â”‚   "datos": [...],                       â”‚
â”‚   "siguiente_cursor": "xyz789"          â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. PatrÃ³n de Filtrado

```
GET /productos?categoria=electronica&precio_min=100&precio_max=500

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRATEGIAS DE FILTRADO                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Query Parameters (mÃ¡s comÃºn):                                  â”‚
â”‚  GET /productos?color=rojo&talla=M                              â”‚
â”‚                                                                 â”‚
â”‚  Body en POST (para filtros complejos):                         â”‚
â”‚  POST /productos/buscar                                         â”‚
â”‚  {                                                              â”‚
â”‚    "filtros": {                                                 â”‚
â”‚      "precio": { "min": 10, "max": 100 },                       â”‚
â”‚      "categorias": ["A", "B"],                                  â”‚
â”‚      "disponible": true                                         â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. PatrÃ³n de Versionado

Â¿QuÃ© pasa cuando necesitas cambiar tu API sin romper a los clientes existentes?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRATEGIAS DE VERSIONADO                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. EN LA URL (mÃ¡s comÃºn):                                      â”‚
â”‚     GET /v1/usuarios                                            â”‚
â”‚     GET /v2/usuarios                                            â”‚
â”‚                                                                 â”‚
â”‚  2. EN HEADER:                                                  â”‚
â”‚     GET /usuarios                                               â”‚
â”‚     Accept: application/vnd.miapi.v2+json                       â”‚
â”‚                                                                 â”‚
â”‚  3. EN QUERY PARAM:                                             â”‚
â”‚     GET /usuarios?version=2                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ejemplo de evoluciÃ³n de versiones:**

```
v1 (versiÃ³n original):
{
  "nombre_completo": "Juan PÃ©rez"
}

v2 (separamos nombre y apellido):
{
  "nombre": "Juan",
  "apellido": "PÃ©rez"
}

Ambas versiones coexisten por un tiempo,
dando tiempo a los clientes para migrar.
```

### 4. PatrÃ³n de Rate Limiting

Protege tu API de abuso limitando cuÃ¡ntas peticiones puede hacer un cliente.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RATE LIMITING                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Headers tÃ­picos en respuesta:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ X-RateLimit-Limit: 100                  â”‚ â† MÃ¡ximo por hora  â”‚
â”‚  â”‚ X-RateLimit-Remaining: 95               â”‚ â† Te quedan 95     â”‚
â”‚  â”‚ X-RateLimit-Reset: 1640000000           â”‚ â† CuÃ¡ndo se reseteaâ”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  Si excedes el lÃ­mite:                                          â”‚
â”‚  HTTP 429 Too Many Requests                                     â”‚
â”‚  {                                                              â”‚
â”‚    "error": "LÃ­mite excedido",                                  â”‚
â”‚    "retry_after": 3600                                          â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. PatrÃ³n HATEOAS

**HATEOAS** = Hypermedia As The Engine Of Application State

La API te dice quÃ© puedes hacer a continuaciÃ³n.

```
GET /pedidos/123

{
  "id": 123,
  "estado": "pendiente",
  "total": 150.00,
  
  "_links": {
    "self": { "href": "/pedidos/123" },
    "pagar": { "href": "/pedidos/123/pagar", "method": "POST" },
    "cancelar": { "href": "/pedidos/123/cancelar", "method": "DELETE" },
    "productos": { "href": "/pedidos/123/productos" }
  }
}

â””â”€â”€â”€ La respuesta incluye las ACCIONES disponibles
     No necesitas documentaciÃ³n externa
```

```
AnalogÃ­a: 
Es como un sitio web - cada pÃ¡gina tiene links a las siguientes
pÃ¡ginas posibles. No necesitas un mapa del sitio para navegar.
```

### 6. PatrÃ³n de Idempotencia

Una operaciÃ³n es **idempotente** si ejecutarla mÃºltiples veces tiene el mismo efecto que ejecutarla una vez.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IDEMPOTENCIA                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  IDEMPOTENTE (seguro repetir):                                  â”‚
â”‚  â”œâ”€â”€ GET  â†’ Leer datos (no cambia nada)                         â”‚
â”‚  â”œâ”€â”€ PUT  â†’ Reemplazar (mismo resultado siempre)                â”‚
â”‚  â””â”€â”€ DELETE â†’ Borrar (ya borrado = sigue borrado)               â”‚
â”‚                                                                 â”‚
â”‚  NO IDEMPOTENTE (cuidado al repetir):                           â”‚
â”‚  â””â”€â”€ POST â†’ Crear (Â¡cada vez crea uno nuevo!)                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ejemplo prÃ¡ctico:**

```
Â¿QuÃ© pasa si el cliente no recibe respuesta y reintenta?

POST /transferencias (sin idempotencia):
  Intento 1: Transfiere $100 âœ“
  Intento 2: Transfiere $100 (Â¡otra vez!)
  Resultado: $200 transferidos ğŸ˜±

POST /transferencias con Idempotency-Key:
  Intento 1: Transfiere $100 (key: abc123) âœ“
  Intento 2: Transfiere $100 (key: abc123) 
  Servidor: "Ya procesÃ© abc123, te devuelvo el resultado anterior"
  Resultado: $100 transferidos âœ“
```

### 7. PatrÃ³n de Retry con Backoff Exponencial

Cuando una peticiÃ³n falla, no reintentes inmediatamente.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKOFF EXPONENCIAL                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Intento 1: Falla â†’ Espera 1 segundo                            â”‚
â”‚  Intento 2: Falla â†’ Espera 2 segundos                           â”‚
â”‚  Intento 3: Falla â†’ Espera 4 segundos                           â”‚
â”‚  Intento 4: Falla â†’ Espera 8 segundos                           â”‚
â”‚  Intento 5: Falla â†’ Abandona o escala                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚     â”‚  â”‚     â”‚     â”‚        â”‚                          â”‚     â”‚
â”‚  â”‚  1s â”‚  â”‚ 2s  â”‚     â”‚  4s    â”‚        8s                â”‚     â”‚
â”‚  â”‚     â”‚  â”‚     â”‚     â”‚        â”‚                          â”‚     â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â—â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚
â”‚  â”‚    â†‘  â†‘     â†‘     â†‘        â†‘                          â”‚     â”‚
â”‚  â”‚    F  R     F     R        F                          â”‚     â”‚
â”‚  â”‚    a  e     a     e        a                          â”‚     â”‚
â”‚  â”‚    l  t     l     t        l                          â”‚     â”‚
â”‚  â”‚    l  r     l     r        l                          â”‚     â”‚
â”‚  â”‚       y           y                                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  + Jitter (aleatorizaciÃ³n) para evitar "thundering herd"        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8. PatrÃ³n Circuit Breaker

Evita seguir llamando a un servicio que estÃ¡ fallando.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CIRCUIT BREAKER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Estados:                                                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   CERRADO   â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚   ABIERTO   â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚ SEMI-ABIERTOâ”‚    â”‚
â”‚  â”‚  (normal)   â”‚ muchosâ”‚  (no llama) â”‚timeoutâ”‚  (prueba)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ fallosâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â–²                                           â”‚           â”‚
â”‚         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚              â”‚ Ã©xito                                  â”‚
â”‚         â”‚              â–¼                                        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                                        â”‚
â”‚                                                                 â”‚
â”‚  CERRADO: Peticiones pasan normal                               â”‚
â”‚  ABIERTO: Peticiones fallan inmediatamente (protege servidor)   â”‚
â”‚  SEMI-ABIERTO: Permite algunas peticiones de prueba             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AutenticaciÃ³n y AutorizaciÃ³n

### Conceptos Clave

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  AUTENTICACIÃ“N: "Â¿QuiÃ©n eres?"                                  â”‚
â”‚                 Verificar identidad                             â”‚
â”‚                                                                 â”‚
â”‚  AUTORIZACIÃ“N:  "Â¿QuÃ© puedes hacer?"                            â”‚
â”‚                 Verificar permisos                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AnalogÃ­a del club nocturno:
â”œâ”€â”€ AutenticaciÃ³n: Mostrar tu ID en la entrada
â””â”€â”€ AutorizaciÃ³n: El ID dice si eres VIP para entrar a zona exclusiva
```

### MÃ©todos Comunes de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MÃ‰TODOS DE AUTENTICACIÃ“N                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. API KEY                                                     â”‚
â”‚     Header: X-API-Key: abc123xyz                                â”‚
â”‚     Simple, pero si se filtra, estÃ¡s en problemas               â”‚
â”‚                                                                 â”‚
â”‚  2. BASIC AUTH                                                  â”‚
â”‚     Header: Authorization: Basic base64(user:pass)              â”‚
â”‚     FÃ¡cil pero envÃ­a credenciales en cada peticiÃ³n              â”‚
â”‚                                                                 â”‚
â”‚  3. BEARER TOKEN (JWT)                                          â”‚
â”‚     Header: Authorization: Bearer eyJhbGciOi...                 â”‚
â”‚     Token temporal, muy comÃºn en APIs modernas                  â”‚
â”‚                                                                 â”‚
â”‚  4. OAUTH 2.0                                                   â”‚
â”‚     Flujo completo de autorizaciÃ³n delegada                     â”‚
â”‚     "Iniciar sesiÃ³n con Google/Facebook"                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JWT (JSON Web Token)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRUCTURA JWT                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxMjM0In0.abc123               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        HEADER              PAYLOAD         FIRMA                â”‚
â”‚                                                                 â”‚
â”‚  HEADER (Base64):                                               â”‚
â”‚  { "alg": "HS256", "typ": "JWT" }                               â”‚
â”‚                                                                 â”‚
â”‚  PAYLOAD (Base64):                                              â”‚
â”‚  {                                                              â”‚
â”‚    "sub": "1234",           â† ID del usuario                    â”‚
â”‚    "name": "Juan",                                              â”‚
â”‚    "role": "admin",         â† AutorizaciÃ³n incluida             â”‚
â”‚    "exp": 1640000000        â† ExpiraciÃ³n                        â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â”‚  FIRMA:                                                         â”‚
â”‚  HMAC-SHA256(header + payload, secret_key)                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo OAuth 2.0 (Simplificado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OAUTH 2.0 FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Usuario              Tu App              Proveedor             â”‚
â”‚     â”‚                    â”‚              (Google/GitHub)         â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â”€â”€"Quiero login"â”€â”€â”€â–ºâ”‚                    â”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â—„â”€â”€"Ve a Google"â”€â”€â”€â”€â”‚                    â”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"AutorÃ­zame"â”€â”€â”€â–ºâ”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"SÃ­, aquÃ­ hay"â”€â”€â”‚                 â”‚
â”‚     â”‚                    â”‚     un cÃ³digo      â”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â”€â”€"CÃ³digo: xyz"â”€â”€â”€â”€â–ºâ”‚                    â”‚                 â”‚
â”‚     â”‚                    â”‚â”€â”€"Dame token"â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
â”‚     â”‚                    â”‚â—„â”€â”€â”€"Token: abc"â”€â”€â”€â”€â”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚     â”‚â—„â”€â”€"Bienvenido!"â”€â”€â”€â”€â”‚                    â”‚                 â”‚
â”‚     â”‚                    â”‚                    â”‚                 â”‚
â”‚                                                                 â”‚
â”‚  Tu app NUNCA ve el password del usuario de Google              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Buenas PrÃ¡cticas Generales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHECKLIST DE API                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â˜ Usa HTTPS siempre                                            â”‚
â”‚  â˜ Versiona tu API desde el inicio                              â”‚
â”‚  â˜ Usa cÃ³digos HTTP correctos                                   â”‚
â”‚  â˜ Retorna errores con mensajes Ãºtiles                          â”‚
â”‚  â˜ Implementa rate limiting                                     â”‚
â”‚  â˜ Documenta tu API (OpenAPI/Swagger)                           â”‚
â”‚  â˜ Valida entrada de datos                                      â”‚
â”‚  â˜ Usa paginaciÃ³n para listas                                   â”‚
â”‚  â˜ Implementa logging y monitoreo                               â”‚
â”‚  â˜ DiseÃ±a pensando en backwards compatibility                   â”‚
â”‚  â˜ Considera idempotencia en operaciones crÃ­ticas               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Resumen Visual Final

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ECOSISTEMA DE APIs                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                              CLIENTE                                    â”‚
â”‚                                 â”‚                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚      AUTENTICACIÃ“N      â”‚                          â”‚
â”‚                    â”‚   (API Key, JWT, OAuth) â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                 â”‚                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚     RATE LIMITING       â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                 â”‚                                       â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â–¼          â–¼          â–¼       â–¼          â–¼          â–¼             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ REST â”‚  â”‚GraphQLâ”‚  â”‚ gRPC  â”‚  â”‚ WS â”‚  â”‚  MCP   â”‚  â”‚SOAP â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚          â”‚          â”‚       â”‚          â”‚          â”‚             â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                 â”‚                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚        SERVIDOR         â”‚                          â”‚
â”‚                    â”‚  (LÃ³gica de Negocio)    â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                 â”‚                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚     BASE DE DATOS       â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Glosario RÃ¡pido

| TÃ©rmino | DefiniciÃ³n |
|---------|------------|
| **API** | Interfaz que permite comunicaciÃ³n entre sistemas |
| **REST** | Estilo arquitectÃ³nico basado en recursos |
| **GraphQL** | Lenguaje de consulta flexible para APIs |
| **gRPC** | Framework de RPC de alto rendimiento |
| **WebSocket** | Protocolo para comunicaciÃ³n bidireccional |
| **MCP** | Protocolo para conectar IAs con herramientas |
| **Endpoint** | URL especÃ­fica de la API |
| **Payload** | Datos enviados en el cuerpo de la peticiÃ³n |
| **JWT** | Token de autenticaciÃ³n auto-contenido |
| **OAuth** | Protocolo de autorizaciÃ³n delegada |
| **Idempotente** | OperaciÃ³n con mismo resultado si se repite |
| **Rate Limit** | LÃ­mite de peticiones por tiempo |
| **HATEOAS** | API que incluye links a acciones disponibles |

